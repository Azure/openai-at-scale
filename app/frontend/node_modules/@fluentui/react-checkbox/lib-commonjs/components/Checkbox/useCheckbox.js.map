{"version":3,"sources":["../../../lib/components/Checkbox/useCheckbox.js"],"sourcesContent":["import * as React from 'react';\nimport { getPartitionedNativeProps, resolveShorthand, useControllableState, useEventCallback, useId, useIsomorphicLayoutEffect, useMergedRefs } from '@fluentui/react-utilities';\nimport { Checkmark12Filled, Checkmark16Filled, Square12Filled, Square16Filled, CircleFilled } from '@fluentui/react-icons';\nimport { Label } from '@fluentui/react-label';\nimport { useFocusWithin } from '@fluentui/react-tabster';\n/**\n * Create the state required to render Checkbox.\n *\n * The returned state can be modified with hooks such as useCheckboxStyles_unstable,\n * before being passed to renderCheckbox_unstable.\n *\n * @param props - props from this instance of Checkbox\n * @param ref - reference to `<input>` element of Checkbox\n */\nexport const useCheckbox_unstable = (props, ref) => {\n  const {\n    disabled = false,\n    required,\n    shape = 'square',\n    size = 'medium',\n    labelPosition = 'after',\n    onChange\n  } = props;\n  const [checked, setChecked] = useControllableState({\n    defaultState: props.defaultChecked,\n    state: props.checked,\n    initialState: false\n  });\n  const nativeProps = getPartitionedNativeProps({\n    props,\n    primarySlotTagName: 'input',\n    excludedPropNames: ['checked', 'defaultChecked', 'size', 'onChange']\n  });\n  const mixed = checked === 'mixed';\n  const id = useId('checkbox-', nativeProps.primary.id);\n  let checkmarkIcon;\n  if (mixed) {\n    if (shape === 'circular') {\n      checkmarkIcon = /*#__PURE__*/React.createElement(CircleFilled, null);\n    } else {\n      checkmarkIcon = size === 'large' ? /*#__PURE__*/React.createElement(Square16Filled, null) : /*#__PURE__*/React.createElement(Square12Filled, null);\n    }\n  } else if (checked) {\n    checkmarkIcon = size === 'large' ? /*#__PURE__*/React.createElement(Checkmark16Filled, null) : /*#__PURE__*/React.createElement(Checkmark12Filled, null);\n  }\n  const state = {\n    shape,\n    checked,\n    disabled,\n    size,\n    labelPosition,\n    components: {\n      root: 'span',\n      input: 'input',\n      indicator: 'div',\n      label: Label\n    },\n    root: resolveShorthand(props.root, {\n      required: true,\n      defaultProps: {\n        ref: useFocusWithin(),\n        ...nativeProps.root\n      }\n    }),\n    input: resolveShorthand(props.input, {\n      required: true,\n      defaultProps: {\n        type: 'checkbox',\n        id,\n        ref,\n        checked: checked === true,\n        ...nativeProps.primary\n      }\n    }),\n    label: resolveShorthand(props.label, {\n      required: false,\n      defaultProps: {\n        htmlFor: id,\n        disabled,\n        required,\n        size: 'medium'\n      }\n    }),\n    indicator: resolveShorthand(props.indicator, {\n      required: true,\n      defaultProps: {\n        'aria-hidden': true,\n        children: checkmarkIcon\n      }\n    })\n  };\n  state.input.onChange = useEventCallback(ev => {\n    const val = ev.currentTarget.indeterminate ? 'mixed' : ev.currentTarget.checked;\n    onChange === null || onChange === void 0 ? void 0 : onChange(ev, {\n      checked: val\n    });\n    setChecked(val);\n  });\n  // Create a ref object for the input element so we can use it to set the indeterminate prop.\n  // Use useMergedRefs, since the ref might be undefined or a function-ref (no .current)\n  const inputRef = useMergedRefs(state.input.ref);\n  state.input.ref = inputRef;\n  // Set the <input> element's checked and indeterminate properties based on our tri-state property.\n  // Since indeterminate can only be set via javascript, it has to be done in a layout effect.\n  useIsomorphicLayoutEffect(() => {\n    if (inputRef.current) {\n      inputRef.current.indeterminate = mixed;\n    }\n  }, [inputRef, mixed]);\n  return state;\n};\n//# sourceMappingURL=useCheckbox.js.map"],"names":["useCheckbox_unstable","props","ref","disabled","required","shape","size","labelPosition","onChange","checked","setChecked","useControllableState","defaultState","defaultChecked","state","initialState","nativeProps","getPartitionedNativeProps","primarySlotTagName","excludedPropNames","mixed","id","useId","primary","checkmarkIcon","React","createElement","CircleFilled","Square16Filled","Square12Filled","Checkmark16Filled","Checkmark12Filled","components","root","input","indicator","label","Label","resolveShorthand","defaultProps","useFocusWithin","type","htmlFor","children","useEventCallback","ev","val","currentTarget","indeterminate","inputRef","useMergedRefs","useIsomorphicLayoutEffect","current"],"mappings":"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"}