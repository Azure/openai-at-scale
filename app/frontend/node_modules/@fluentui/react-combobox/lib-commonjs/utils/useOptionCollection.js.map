{"version":3,"sources":["../../lib/utils/useOptionCollection.js"],"sourcesContent":["import * as React from 'react';\n/**\n * A hook for managing a collection of child Options\n */\nexport const useOptionCollection = () => {\n  const nodes = React.useRef([]);\n  const collectionAPI = React.useMemo(() => {\n    const getCount = () => nodes.current.length;\n    const getOptionAtIndex = index => {\n      var _nodes_current_index;\n      return (_nodes_current_index = nodes.current[index]) === null || _nodes_current_index === void 0 ? void 0 : _nodes_current_index.option;\n    };\n    const getIndexOfId = id => nodes.current.findIndex(node => node.option.id === id);\n    const getOptionById = id => {\n      const item = nodes.current.find(node => node.option.id === id);\n      return item === null || item === void 0 ? void 0 : item.option;\n    };\n    const getOptionsMatchingText = matcher => {\n      return nodes.current.filter(node => matcher(node.option.text)).map(node => node.option);\n    };\n    const getOptionsMatchingValue = matcher => {\n      return nodes.current.filter(node => matcher(node.option.value)).map(node => node.option);\n    };\n    return {\n      getCount,\n      getOptionAtIndex,\n      getIndexOfId,\n      getOptionById,\n      getOptionsMatchingText,\n      getOptionsMatchingValue\n    };\n  }, []);\n  const registerOption = React.useCallback((option, element) => {\n    var _nodes_current_index;\n    const index = nodes.current.findIndex(node => {\n      if (!node.element || !element) {\n        return false;\n      }\n      if (node.option.id === option.id) {\n        return true;\n      }\n      // use the DOM method compareDocumentPosition to order the current node against registered nodes\n      // eslint-disable-next-line no-bitwise\n      return node.element.compareDocumentPosition(element) & Node.DOCUMENT_POSITION_PRECEDING;\n    });\n    // do not register the option if it already exists\n    if (((_nodes_current_index = nodes.current[index]) === null || _nodes_current_index === void 0 ? void 0 : _nodes_current_index.option.id) !== option.id) {\n      const newItem = {\n        element,\n        option\n      };\n      // If an index is not found we will push the element to the end.\n      if (index === -1) {\n        nodes.current = [...nodes.current, newItem];\n      } else {\n        nodes.current.splice(index, 0, newItem);\n      }\n    }\n    // return the unregister function\n    return () => {\n      nodes.current = nodes.current.filter(node => node.option.id !== option.id);\n    };\n  }, []);\n  return {\n    ...collectionAPI,\n    options: nodes.current.map(node => node.option),\n    registerOption\n  };\n};\n//# sourceMappingURL=useOptionCollection.js.map"],"names":["useOptionCollection","nodes","React","useRef","collectionAPI","useMemo","getCount","current","length","getOptionAtIndex","index","_nodes_current_index","option","getIndexOfId","id","findIndex","node","getOptionById","item","find","getOptionsMatchingText","matcher","filter","text","map","getOptionsMatchingValue","value","registerOption","useCallback","element","compareDocumentPosition","Node","DOCUMENT_POSITION_PRECEDING","newItem","splice","options"],"mappings":"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"}