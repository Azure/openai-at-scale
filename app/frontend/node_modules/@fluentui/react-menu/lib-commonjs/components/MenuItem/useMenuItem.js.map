{"version":3,"sources":["../../../lib/components/MenuItem/useMenuItem.js"],"sourcesContent":["import * as React from 'react';\nimport { useEventCallback, resolveShorthand, useMergedRefs, getNativeElementProps } from '@fluentui/react-utilities';\nimport { useFluent_unstable as useFluent } from '@fluentui/react-shared-contexts';\nimport { useCharacterSearch } from './useCharacterSearch';\nimport { useMenuTriggerContext_unstable } from '../../contexts/menuTriggerContext';\nimport { ChevronRightFilled, ChevronRightRegular, ChevronLeftFilled, ChevronLeftRegular, bundleIcon } from '@fluentui/react-icons';\nimport { useMenuListContext_unstable } from '../../contexts/menuListContext';\nimport { useMenuContext_unstable } from '../../contexts/menuContext';\nimport { useARIAButtonProps } from '@fluentui/react-aria';\nimport { Enter, Space } from '@fluentui/keyboard-keys';\nconst ChevronRightIcon = /*#__PURE__*/bundleIcon(ChevronRightFilled, ChevronRightRegular);\nconst ChevronLeftIcon = /*#__PURE__*/bundleIcon(ChevronLeftFilled, ChevronLeftRegular);\n/**\n * Returns the props and state required to render the component\n */\nexport const useMenuItem_unstable = (props, ref) => {\n  const isSubmenuTrigger = useMenuTriggerContext_unstable();\n  const persistOnClickContext = useMenuContext_unstable(context => context.persistOnItemClick);\n  const {\n    as = 'div',\n    disabled = false,\n    hasSubmenu = isSubmenuTrigger,\n    persistOnClick = persistOnClickContext\n  } = props;\n  const hasIcons = useMenuListContext_unstable(context => context.hasIcons);\n  const hasCheckmarks = useMenuListContext_unstable(context => context.hasCheckmarks);\n  const setOpen = useMenuContext_unstable(context => context.setOpen);\n  const {\n    dir\n  } = useFluent();\n  const innerRef = React.useRef(null);\n  const dismissedWithKeyboardRef = React.useRef(false);\n  const state = {\n    hasSubmenu,\n    disabled,\n    persistOnClick,\n    components: {\n      root: 'div',\n      icon: 'span',\n      checkmark: 'span',\n      submenuIndicator: 'span',\n      content: 'span',\n      secondaryContent: 'span'\n    },\n    root: getNativeElementProps(as, useARIAButtonProps(as, {\n      role: 'menuitem',\n      ...props,\n      disabled: false,\n      disabledFocusable: disabled,\n      ref: useMergedRefs(ref, innerRef),\n      onKeyDown: useEventCallback(event => {\n        var _props_onKeyDown;\n        (_props_onKeyDown = props.onKeyDown) === null || _props_onKeyDown === void 0 ? void 0 : _props_onKeyDown.call(props, event);\n        if (!event.isDefaultPrevented() && (event.key === Space || event.key === Enter)) {\n          dismissedWithKeyboardRef.current = true;\n        }\n      }),\n      onMouseEnter: useEventCallback(event => {\n        var _innerRef_current, _props_onMouseEnter;\n        (_innerRef_current = innerRef.current) === null || _innerRef_current === void 0 ? void 0 : _innerRef_current.focus();\n        (_props_onMouseEnter = props.onMouseEnter) === null || _props_onMouseEnter === void 0 ? void 0 : _props_onMouseEnter.call(props, event);\n      }),\n      onClick: useEventCallback(event => {\n        var _props_onClick;\n        if (!hasSubmenu && !persistOnClick) {\n          setOpen(event, {\n            open: false,\n            keyboard: dismissedWithKeyboardRef.current,\n            bubble: true,\n            type: 'menuItemClick',\n            event\n          });\n          dismissedWithKeyboardRef.current = false;\n        }\n        (_props_onClick = props.onClick) === null || _props_onClick === void 0 ? void 0 : _props_onClick.call(props, event);\n      })\n    })),\n    icon: resolveShorthand(props.icon, {\n      required: hasIcons\n    }),\n    checkmark: resolveShorthand(props.checkmark, {\n      required: hasCheckmarks\n    }),\n    submenuIndicator: resolveShorthand(props.submenuIndicator, {\n      required: hasSubmenu,\n      defaultProps: {\n        children: dir === 'ltr' ? /*#__PURE__*/React.createElement(ChevronRightIcon, null) : /*#__PURE__*/React.createElement(ChevronLeftIcon, null)\n      }\n    }),\n    content: resolveShorthand(props.content, {\n      required: !!props.children,\n      defaultProps: {\n        children: props.children\n      }\n    }),\n    secondaryContent: resolveShorthand(props.secondaryContent)\n  };\n  useCharacterSearch(state, innerRef);\n  return state;\n};\n//# sourceMappingURL=useMenuItem.js.map"],"names":["useMenuItem_unstable","ChevronRightIcon","bundleIcon","ChevronRightFilled","ChevronRightRegular","ChevronLeftIcon","ChevronLeftFilled","ChevronLeftRegular","props","ref","isSubmenuTrigger","useMenuTriggerContext_unstable","persistOnClickContext","useMenuContext_unstable","context","persistOnItemClick","as","disabled","hasSubmenu","persistOnClick","hasIcons","useMenuListContext_unstable","hasCheckmarks","setOpen","dir","useFluent","innerRef","React","useRef","dismissedWithKeyboardRef","state","components","root","icon","checkmark","submenuIndicator","content","secondaryContent","getNativeElementProps","useARIAButtonProps","role","disabledFocusable","useMergedRefs","onKeyDown","useEventCallback","event","_props_onKeyDown","call","isDefaultPrevented","key","Space","Enter","current","onMouseEnter","_innerRef_current","_props_onMouseEnter","focus","onClick","_props_onClick","open","keyboard","bubble","type","resolveShorthand","required","defaultProps","children","createElement","useCharacterSearch"],"mappings":"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"}