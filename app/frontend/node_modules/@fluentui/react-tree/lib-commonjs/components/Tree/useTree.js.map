{"version":3,"sources":["../../../lib/components/Tree/useTree.js"],"sourcesContent":["import * as React from 'react';\nimport { getNativeElementProps, useEventCallback, useMergedRefs } from '@fluentui/react-utilities';\nimport { useTreeContext_unstable } from '../../contexts';\nimport { useNestedTreeNavigation, useOpenItemsState } from '../../hooks';\nimport { treeDataTypes } from '../../utils/tokens';\n/**\n * Create the state required to render Tree.\n *\n * The returned state can be modified with hooks such as useTreeStyles_unstable,\n * before being passed to renderTree_unstable.\n *\n * @param props - props from this instance of Tree\n * @param ref - reference to root HTMLElement of Tree\n */\nexport const useTree_unstable = (props, ref) => {\n  const isSubtree = useTreeContext_unstable(ctx => ctx.level > 0);\n  // as isSubtree is static, this doesn't break rule of hooks\n  // and if this becomes an issue later on, this can be easily converted\n  // eslint-disable-next-line react-hooks/rules-of-hooks\n  return isSubtree ? useSubtree(props, ref) : useRootTree(props, ref);\n};\n/**\n * Create the state required to render a sub-level Tree.\n *\n * @param props - props from this instance of Tree\n * @param ref - reference to root HTMLElement of Tree\n */\nfunction useSubtree(props, ref) {\n  const contextAppearance = useTreeContext_unstable(ctx => ctx.appearance);\n  const contextSize = useTreeContext_unstable(ctx => ctx.size);\n  const {\n    appearance = contextAppearance !== null && contextAppearance !== void 0 ? contextAppearance : 'subtle',\n    size = contextSize !== null && contextSize !== void 0 ? contextSize : 'medium'\n  } = props;\n  const parentLevel = useTreeContext_unstable(ctx => ctx.level);\n  const openItems = useTreeContext_unstable(ctx => ctx.openItems);\n  const requestOpenChange = useTreeContext_unstable(ctx => ctx.requestOpenChange);\n  const requestNavigation = useTreeContext_unstable(ctx => ctx.requestNavigation);\n  return {\n    components: {\n      root: 'div'\n    },\n    appearance,\n    size,\n    level: parentLevel + 1,\n    root: getNativeElementProps('div', {\n      ref,\n      role: 'group',\n      ...props\n    }),\n    openItems,\n    requestOpenChange,\n    requestNavigation\n  };\n}\n/**\n * Create the state required to render the root level Tree.\n *\n * @param props - props from this instance of Tree\n * @param ref - reference to root HTMLElement of Tree\n */\nfunction useRootTree(props, ref) {\n  warnIfNoProperPropsRootTree(props);\n  const {\n    appearance = 'subtle',\n    size = 'medium'\n  } = props;\n  const [openItems, updateOpenItems] = useOpenItemsState(props);\n  const [navigate, navigationRef] = useNestedTreeNavigation();\n  const requestOpenChange = useEventCallback(data => {\n    var _props_onOpenChange;\n    (_props_onOpenChange = props.onOpenChange) === null || _props_onOpenChange === void 0 ? void 0 : _props_onOpenChange.call(props, data.event, data);\n    if (data.event.isDefaultPrevented()) {\n      return;\n    }\n    return updateOpenItems(data);\n  });\n  const requestNavigation = useEventCallback(data => {\n    var _props_onNavigation_unstable;\n    (_props_onNavigation_unstable = props.onNavigation_unstable) === null || _props_onNavigation_unstable === void 0 ? void 0 : _props_onNavigation_unstable.call(props, data.event, data);\n    if (data.event.isDefaultPrevented()) {\n      return;\n    }\n    navigate(data);\n    if (data.type === treeDataTypes.arrowDown || data.type === treeDataTypes.arrowUp) {\n      data.event.preventDefault();\n    }\n  });\n  return {\n    components: {\n      root: 'div'\n    },\n    appearance,\n    size,\n    level: 1,\n    openItems,\n    requestOpenChange,\n    requestNavigation,\n    root: getNativeElementProps('div', {\n      ref: useMergedRefs(navigationRef, ref),\n      role: 'tree',\n      ...props\n    })\n  };\n}\nfunction warnIfNoProperPropsRootTree(props) {\n  if (process.env.NODE_ENV === 'development') {\n    if (!props['aria-label'] && !props['aria-labelledby']) {\n      // eslint-disable-next-line no-console\n      console.warn('Tree must have either a `aria-label` or `aria-labelledby` property defined');\n    }\n  }\n}\n//# sourceMappingURL=useTree.js.map"],"names":["useTree_unstable","props","ref","isSubtree","useTreeContext_unstable","ctx","level","useSubtree","useRootTree","contextAppearance","appearance","contextSize","size","parentLevel","openItems","requestOpenChange","requestNavigation","components","root","getNativeElementProps","role","warnIfNoProperPropsRootTree","updateOpenItems","useOpenItemsState","navigate","navigationRef","useNestedTreeNavigation","useEventCallback","data","_props_onOpenChange","onOpenChange","call","event","isDefaultPrevented","_props_onNavigation_unstable","onNavigation_unstable","type","treeDataTypes","arrowDown","arrowUp","preventDefault","useMergedRefs","process","env","NODE_ENV","console","warn"],"mappings":"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"}