"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "useRovingTabIndex", {
    enumerable: true,
    get: ()=>useRovingTabIndex
});
const _interopRequireWildcard = require("@swc/helpers/lib/_interop_require_wildcard.js").default;
const _reactUtilities = require("@fluentui/react-utilities");
const _react = /*#__PURE__*/ _interopRequireWildcard(require("react"));
const _useHTMLElementWalker = require("./useHTMLElementWalker");
function useRovingTabIndex(filter) {
    const currentElementRef = _react.useRef();
    const [walkerRef, rootRef] = (0, _useHTMLElementWalker.useHTMLElementWalkerRef)(filter);
    const rootRefCallback = (element)=>{
        if (!element) {
            return;
        }
        reset();
    };
    function reset() {
        if (!walkerRef.current) {
            return;
        }
        const walker = walkerRef.current;
        walker.currentElement = walker.root;
        let tabbableChild = walker.firstChild((element)=>element.tabIndex === 0 ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_SKIP);
        walker.currentElement = walker.root;
        tabbableChild !== null && tabbableChild !== void 0 ? tabbableChild : tabbableChild = walker.firstChild();
        if (!tabbableChild) {
            if (process.env.NODE_ENV === 'development') {
                // eslint-disable-next-line no-console
                console.warn('useRovingTabIndexes: internal error, no tabbable element was found');
            }
            return;
        }
        tabbableChild.tabIndex = 0;
        currentElementRef.current = tabbableChild;
        let nextElement = null;
        while((nextElement = walker.nextElement()) && nextElement !== tabbableChild){
            nextElement.tabIndex = -1;
        }
    }
    function rove(nextElement) {
        if (!currentElementRef.current) {
            return;
        }
        currentElementRef.current.tabIndex = -1;
        nextElement.tabIndex = 0;
        nextElement.focus();
        currentElementRef.current = nextElement;
    }
    return [
        {
            rove,
            reset
        },
        (0, _reactUtilities.useMergedRefs)(rootRef, rootRefCallback)
    ];
} //# sourceMappingURL=useRovingTabIndexes.js.map

//# sourceMappingURL=useRovingTabIndexes.js.map