{"version":3,"file":"flex.esm.js","sources":["../../../../packages/core/src/shorthands/flex.ts"],"sourcesContent":["import * as CSS from 'csstype';\nimport type { GriffelStylesStrictCSSObject } from '../types';\nimport { FlexInput } from './types';\n\ntype FlexStyle = Pick<GriffelStylesStrictCSSObject, 'flexGrow' | 'flexShrink' | 'flexBasis'>;\n\nconst isUnit = (value: CSS.Property.Flex | undefined) => typeof value === 'string' && /(\\d+(\\w+|%))/.test(value);\n\nconst isUnitless = (value: CSS.Property.Flex | undefined) => typeof value === 'number' && !Number.isNaN(value);\n\nconst isInitial = (value: CSS.Property.Flex | undefined) => value === 'initial';\n\nconst isAuto = (value: CSS.Property.Flex | undefined) => value === 'auto';\n\nconst isNone = (value: CSS.Property.Flex | undefined) => value === 'none';\n\nconst widthReservedKeys = ['content', 'fit-content', 'max-content', 'min-content'] as const;\ntype ReservedKeys = typeof widthReservedKeys[number];\ntype Width = ReservedKeys | string;\nconst isWidth = (value: CSS.Property.Flex | undefined) => widthReservedKeys.some(key => value === key) || isUnit(value);\n\n/**\n * A function that implements CSS spec conformant expansion for \"flex\".\n *\n * @example\n *   flex('auto')\n *   flex(1, '2.5rem')\n *   flex(0, 0, 'auto')\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/CSS/flex\n */\nexport function flex(...values: FlexInput): FlexStyle {\n  const isOneValueSyntax = values.length === 1;\n  const isTwoValueSyntax = values.length === 2;\n  const isThreeValueSyntax = values.length === 3;\n\n  if (isOneValueSyntax) {\n    const [firstValue] = values;\n\n    if (isInitial(firstValue)) {\n      return {\n        flexGrow: 0,\n        flexShrink: 1,\n        flexBasis: 'auto',\n      };\n    }\n\n    if (isAuto(firstValue)) {\n      return {\n        flexGrow: 1,\n        flexShrink: 1,\n        flexBasis: 'auto',\n      };\n    }\n\n    if (isNone(firstValue)) {\n      return {\n        flexGrow: 0,\n        flexShrink: 0,\n        flexBasis: 'auto',\n      };\n    }\n\n    if (isUnitless(firstValue)) {\n      return {\n        flexGrow: firstValue as number,\n        flexShrink: 1,\n        flexBasis: 0,\n      };\n    }\n\n    if (isWidth(firstValue)) {\n      return {\n        flexGrow: 1,\n        flexShrink: 1,\n        flexBasis: firstValue as Width,\n      };\n    }\n  }\n\n  if (isTwoValueSyntax) {\n    const [firstValue, secondValue] = values;\n\n    if (isUnitless(secondValue)) {\n      return {\n        flexGrow: firstValue,\n        flexShrink: secondValue,\n        flexBasis: 0,\n      };\n    }\n\n    if (isWidth(secondValue)) {\n      return {\n        flexGrow: firstValue,\n        flexShrink: 1,\n        flexBasis: secondValue as Width,\n      };\n    }\n  }\n\n  if (isThreeValueSyntax) {\n    const [firstValue, secondValue, thirdValue] = values;\n\n    if (isUnitless(firstValue) && isUnitless(secondValue) && (isAuto(thirdValue) || isWidth(thirdValue))) {\n      return {\n        flexGrow: firstValue,\n        flexShrink: secondValue,\n        flexBasis: thirdValue as Width,\n      };\n    }\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    // eslint-disable-next-line no-console\n    console.error(\n      `The value passed to shorthands.flex did not match any flex property specs. The CSS styles were not generated. Please, check the flex documentation.`,\n    );\n  }\n  return {};\n}\n"],"names":["isUnit","value","test","isUnitless","Number","isNaN","isInitial","isAuto","isNone","widthReservedKeys","isWidth","some","key","flex","values","isOneValueSyntax","length","isTwoValueSyntax","isThreeValueSyntax","firstValue","flexGrow","flexShrink","flexBasis","secondValue","thirdValue","process","env","NODE_ENV","console","error"],"mappings":"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"}